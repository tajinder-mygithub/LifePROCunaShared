--@**20170302*******************************************
--@**
--@** Licensed Materials - Property of
--@** Professional Data Management Again, Inc.
--@** (C)Copyright Professional Data Management Again,
--@** Inc.  1983-2010.
--@**
--@** All Rights Reserved.  Contains confidential and
--@** trade secret information.  Copyright notice is
--@** precautionary only and does not imply publication.
--@**
--@*****************************************************
-- 20170302 20170227-002-01 KRH Add new columns to Confirms table
--@**20170302*******************************************
-- ADD new column/s into PCONF_POLICY_CONFIRMATIONS


-- **** Alter CONFIRMS Table

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='PERCENT_LIFE_BENEFIT')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD PERCENT_LIFE_BENEFIT DECIMAL(8,5) NOT NULL
     CONSTRAINT PERCENT_LIFE_BENEFIT_def DEFAULT 0

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT PERCENT_LIFE_BENEFIT_def     
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='NET_WTDL_AMOUNT')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD NET_WTDL_AMOUNT MONEY NOT NULL
     CONSTRAINT NET_WTDL_AMOUNT_def DEFAULT 0

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT NET_WTDL_AMOUNT_def        
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='LOAD_REFUND')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD LOAD_REFUND MONEY NOT NULL
     CONSTRAINT LOAD_REFUND_def DEFAULT 0

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT LOAD_REFUND_def       
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='INTEREST_PAID')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD INTEREST_PAID MONEY NOT NULL
     CONSTRAINT INTEREST_PAID_def DEFAULT 0

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT INTEREST_PAID_def        
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='SERVICING_AGENT_NUMBER')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD SERVICING_AGENT_NUMBER NVARCHAR(12) NOT NULL
     CONSTRAINT SERVICING_AGENT_NUMBER_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT SERVICING_AGENT_NUMBER_def      
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='WRITING_AGENT_NUMBER')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD WRITING_AGENT_NUMBER NVARCHAR(12) NOT NULL
     CONSTRAINT WRITING_AGENT_NUMBER_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT WRITING_AGENT_NUMBER_def       
END     
;


IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='SERVICING_AGENCY_NUMBER')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD SERVICING_AGENCY_NUMBER NVARCHAR(12) NOT NULL
     CONSTRAINT SERVICING_AGENCY_NUMBER_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT SERVICING_AGENCY_NUMBER_def        
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='PRODUCT_CODE')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD PRODUCT_CODE NVARCHAR(10) NOT NULL
     CONSTRAINT PRODUCT_CODE_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT PRODUCT_CODE_def       
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='TAX_QUAL_CODE')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD TAX_QUAL_CODE NCHAR(1) NOT NULL
     CONSTRAINT TAX_QUAL_CODE_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT TAX_QUAL_CODE_def        
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='TAX_QUAL_OVERRIDE')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD TAX_QUAL_OVERRIDE NCHAR(1) NOT NULL
     CONSTRAINT TAX_QUAL_OVERRIDE_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT TAX_QUAL_OVERRIDE_def         
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='OWNER_RESIDENT_STATE')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD OWNER_RESIDENT_STATE NCHAR(2) NOT NULL
     CONSTRAINT OWNER_RESIDENT_STATE_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT OWNER_RESIDENT_STATE_def        
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='COOWNER_NAME')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD COOWNER_NAME NVARCHAR(110) NOT NULL
     CONSTRAINT COOWNER_NAME_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT COOWNER_NAME_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='JOINT_ANNUITANT_NAME')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD JOINT_ANNUITANT_NAME NVARCHAR(110) NOT NULL
     CONSTRAINT JOINT_ANNUITANT_NAME_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT JOINT_ANNUITANT_NAME_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='ISSUE_DATE')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD ISSUE_DATE INT NOT NULL
     CONSTRAINT ISSUE_DATE_def DEFAULT 0

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT ISSUE_DATE_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='REPRICE_INDICATOR')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD REPRICE_INDICATOR NCHAR(1) NOT NULL
     CONSTRAINT REPRICE_INDICATOR_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT REPRICE_INDICATOR_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='HIREDATE_401K')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD HIREDATE_401K INT NOT NULL
     CONSTRAINT HIREDATE_401K_def DEFAULT 0

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT HIREDATE_401K_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='PROCESS_NUMBER')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD PROCESS_NUMBER INT NOT NULL
     CONSTRAINT PROCESS_NUMBER_def DEFAULT 0

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT PROCESS_NUMBER_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='ANNUITANT_ADDRESS_1')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD ANNUITANT_ADDRESS_1 NVARCHAR(35) NOT NULL
     CONSTRAINT ANNUITANT_ADDRESS_1_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT ANNUITANT_ADDRESS_1_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='ANNUITANT_ADDRESS_2')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD ANNUITANT_ADDRESS_2 NVARCHAR(35) NOT NULL
     CONSTRAINT ANNUITANT_ADDRESS_2_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT ANNUITANT_ADDRESS_2_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='ANNUITANT_ADDRESS_3')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD ANNUITANT_ADDRESS_3 NVARCHAR(35) NOT NULL
     CONSTRAINT ANNUITANT_ADDRESS_3_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT ANNUITANT_ADDRESS_3_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='ANNUITANT_ADDRESS_4')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD ANNUITANT_ADDRESS_4 NVARCHAR(35) NOT NULL
     CONSTRAINT ANNUITANT_ADDRESS_4_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT ANNUITANT_ADDRESS_4_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='ANNUITANT_COUNTRY')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD ANNUITANT_COUNTRY NVARCHAR(30) NOT NULL
     CONSTRAINT ANNUITANT_COUNTRY_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT ANNUITANT_COUNTRY_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='OWNER_SSN')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD OWNER_SSN VARCHAR(11) NOT NULL
     CONSTRAINT OWNER_SSN_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT OWNER_SSN_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='OWNER_FIRST_NAME')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD OWNER_FIRST_NAME NVARCHAR(20) NOT NULL
     CONSTRAINT OWNER_FIRST_NAME_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT OWNER_FIRST_NAME_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='OWNER_LAST_NAME')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD OWNER_LAST_NAME NVARCHAR(40) NOT NULL
     CONSTRAINT OWNER_LAST_NAME_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT OWNER_LAST_NAME_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='GROSS_DEPOSIT')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD GROSS_DEPOSIT MONEY NOT NULL
     CONSTRAINT GROSS_DEPOSIT_def DEFAULT 0

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT GROSS_DEPOSIT_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='GROSS_WITHDRAWAL')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD GROSS_WITHDRAWAL MONEY NOT NULL
     CONSTRAINT GROSS_WITHDRAWAL_def DEFAULT 0

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT GROSS_WITHDRAWAL_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='REVERSE_INDICATOR')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD REVERSE_INDICATOR NCHAR(1) NOT NULL
     CONSTRAINT REVERSE_INDICATOR_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT REVERSE_INDICATOR_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='OWNER_FORMAT_CODE')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD OWNER_FORMAT_CODE NCHAR(1) NOT NULL
     CONSTRAINT OWNER_FORMAT_CODE_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT OWNER_FORMAT_CODE_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='FIXED_ACCT_LIMIT_APPLY')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD FIXED_ACCT_LIMIT_APPLY NCHAR(1) NOT NULL
     CONSTRAINT FIXED_ACCT_LIMIT_APPLY_def DEFAULT ''

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT FIXED_ACCT_LIMIT_APPLY_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='FIXED_ACCOUNT_LIMIT')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD FIXED_ACCOUNT_LIMIT DECIMAL(11,4) NOT NULL
     CONSTRAINT FIXED_ACCOUNT_LIMIT_def DEFAULT 0

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT FIXED_ACCOUNT_LIMIT_def          
END     
;

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRMS') AND name='MARKET_VALUE_ADJUSTMENT')
BEGIN
   ALTER TABLE dbo.CONFIRMS
     ADD MARKET_VALUE_ADJUSTMENT MONEY NOT NULL
     CONSTRAINT MARKET_VALUE_ADJUSTMENT_def DEFAULT 0

   ALTER TABLE dbo.CONFIRMS
     DROP CONSTRAINT MARKET_VALUE_ADJUSTMENT_def          
END     
;


-- **** Alter CONFIRMS_ROWS Table

IF NOT EXISTS (SELECT * FROM sys.columns WHERE object_id = OBJECT_ID(N'dbo.CONFIRM_ROWS') AND name='FUND_TYPE')
BEGIN
   ALTER TABLE dbo.CONFIRM_ROWS
     ADD FUND_TYPE NCHAR(1) NOT NULL
     CONSTRAINT FUND_TYPE_def DEFAULT ''

   ALTER TABLE dbo.CONFIRM_ROWS
     DROP CONSTRAINT FUND_TYPE_def     
END     
;
